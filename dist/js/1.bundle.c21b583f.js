(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{14:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-snackbar",{attrs:{timeout:t.undo?4e3:2500,top:"",color:t.undo?"error":"success"},scopedSlots:t._u([{key:"action",fn:function(e){var r=e.attrs;return[t.undo?n("v-btn",t._b({attrs:{dark:"",icon:""},on:{click:t.handleUndo}},"v-btn",r,!1),[n("v-icon",[t._v("mdi-undo-variant")])],1):t._e(),t._v(" "),n("v-btn",t._b({attrs:{dark:"",icon:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",r,!1),[n("v-icon",[t._v("mdi-close-circle")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[n("span",[t._v(t._s(t.msg))])])};r._withStripped=!0;var i={name:"Snackbar",data:()=>({snackbar:!1,undo:!1,msg:""}),methods:{handleUndo(){this.snackbar=!1,this.$emit("handleUndo")},show(t){this.undo=!1,this.msg=t,this.snackbar=!0},showError(t){this.undo=!0,this.msg=t,this.snackbar=!0}}},s=n(2),o=Object(s.a)(i,r,[],!1,null,null,null);o.options.__file="src/components/Snackbar.vue";e.a=o.exports},15:function(t,e,n){var r=n(7),i=n(17);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var s={insert:"head",singleton:!1};r(i,s);t.exports=i.locals||{}},16:function(t,e,n){"use strict";n(15)},17:function(t,e,n){"use strict";n.r(e);var r=n(6),i=n.n(r)()(!0);i.push([t.i,"\n.item.complete {\r\n\tborder-left: 4px solid #3cd1c2;\n}\n.item.ongoing {\r\n\tborder-left: 4px solid orange;\n}\n.item.overdue {\r\n\tborder-left: 4px solid tomato;\n}\n.v-chip.complete {\r\n\tbackground: #3cd1c2 !important;\n}\n.v-chip.ongoing {\r\n\tbackground: #ffaa2c !important;\n}\n.v-chip.overdue {\r\n\tbackground: #f83e70 !important;\n}\r\n","",{version:3,sources:["webpack://src/views/Todo.vue"],names:[],mappings:";AAsQA;CACA,8BAAA;AACA;AACA;CACA,6BAAA;AACA;AACA;CACA,6BAAA;AACA;AACA;CACA,8BAAA;AACA;AACA;CACA,8BAAA;AACA;AACA;CACA,8BAAA;AACA",sourcesContent:['<template>\r\n\t<div class="todo">\r\n\t\t\x3c!-- 提示 --\x3e\r\n\t\t<Snackbar ref="snackbar" @handleUndo="recovery_item()" />\r\n\t\t\x3c!-- 主体 --\x3e\r\n\t\t<h1 class="text-subtitle-1 grey--text">Todolist</h1>\r\n\t\t<v-container class="my-2 pa-1 my-md-8 pa-md-6">\r\n\t\t\t\x3c!-- 排序 --\x3e\r\n\t\t\t<v-row class="mb-4 mx-2">\r\n\t\t\t\t<v-tooltip top>\r\n\t\t\t\t\t<template v-slot:activator="{ on, attrs }">\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tcolor="grey"\r\n\t\t\t\t\t\t\t@click="\r\n\t\t\t\t\t\t\t\tsort_by(\'\');\r\n\t\t\t\t\t\t\t\tsort_tag(\'\');\r\n\t\t\t\t\t\t\t"\r\n\t\t\t\t\t\t\tv-bind="attrs"\r\n\t\t\t\t\t\t\tv-on="on"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon left small>mdi-folder</v-icon>全部\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<span>全部的待办事项</span>\r\n\t\t\t\t</v-tooltip>\r\n\r\n\t\t\t\t<v-tooltip top>\r\n\t\t\t\t\t<template v-slot:activator="{ on, attrs }">\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tcolor="grey"\r\n\t\t\t\t\t\t\t@click="\r\n\t\t\t\t\t\t\t\tsort_by(\'complete\');\r\n\t\t\t\t\t\t\t\tsort_tag(\'\');\r\n\t\t\t\t\t\t\t"\r\n\t\t\t\t\t\t\tv-bind="attrs"\r\n\t\t\t\t\t\t\tv-on="on"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon left small>mdi-check-all</v-icon>已完成\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<span>已完成的待办事项</span>\r\n\t\t\t\t</v-tooltip>\r\n\r\n\t\t\t\t<v-tooltip top>\r\n\t\t\t\t\t<template v-slot:activator="{ on, attrs }">\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tcolor="grey"\r\n\t\t\t\t\t\t\t@click="\r\n\t\t\t\t\t\t\t\tsort_by(\'ongoing\');\r\n\t\t\t\t\t\t\t\tsort_tag(\'\');\r\n\t\t\t\t\t\t\t"\r\n\t\t\t\t\t\t\tv-bind="attrs"\r\n\t\t\t\t\t\t\tv-on="on"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon left small>mdi-close</v-icon>未完成\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<span>未完成的待办事项</span>\r\n\t\t\t\t</v-tooltip>\r\n\t\t\t</v-row>\r\n\t\t\t\x3c!-- 数据 --\x3e\r\n\t\t\t<v-hover v-slot:default="{ hover }" v-for="(item, index) in sortedItemList" :key="item.id">\r\n\t\t\t\t<v-card @click="expand_handle(index)" :ripple="false" flat>\r\n\t\t\t\t\t<v-row no-gutters :class="`${item.status} pa-3 item`">\r\n\t\t\t\t\t\t<v-col cols="4" sm="3" md="2">\r\n\t\t\t\t\t\t\t<div class="text-caption grey--text">事项名称</div>\r\n\t\t\t\t\t\t\t<div>{{ item.title }}</div>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-col md="5" class="d-none d-md-block">\r\n\t\t\t\t\t\t\t<div class="text-caption grey--text">详情</div>\r\n\t\t\t\t\t\t\t<div class="d-inline-block text-truncate" style="max-width: 300px">{{ item.content }}</div>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-col cols="3" sm="3" md="2">\r\n\t\t\t\t\t\t\t<div class="text-caption grey--text">截止日期</div>\r\n\t\t\t\t\t\t\t<div>{{ item.due }}</div>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-col cols="5" sm="4" md="2">\r\n\t\t\t\t\t\t\t<div class="text-caption grey--text">标签</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<v-chip x-small v-if="item.tags && item.tags.length == 0" @click.stop="sort_tag(\'\')">\r\n\t\t\t\t\t\t\t\t\t<span>无</span>\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t\t<v-chip x-small v-else v-for="(tag, i) in item.tags" :key="i" @click.stop="sort_tag(tag)">\r\n\t\t\t\t\t\t\t\t\t<span>{{ tag }}</span>\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-spacer class="d-none d-sm-flex"></v-spacer>\r\n\t\t\t\t\t\t<v-col align-self="center">\r\n\t\t\t\t\t\t\t<v-btn icon v-if="hover" class="mt-1 d-none d-sm-block">\r\n\t\t\t\t\t\t\t\t<v-icon>{{ expand.indexOf(index) != -1 ? "mdi-chevron-up" : "mdi-chevron-down" }}</v-icon>\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t</v-row>\r\n\t\t\t\t\t<v-divider></v-divider>\r\n\t\t\t\t\t<v-expand-transition>\r\n\t\t\t\t\t\t<div v-show="expand.indexOf(index) != -1">\r\n\t\t\t\t\t\t\t<v-row no-gutters>\r\n\t\t\t\t\t\t\t\t<v-col cols="7" md="3" offset-md="1" sm="3" offset-sm="1">\r\n\t\t\t\t\t\t\t\t\t<v-card-text class="pt-2 pb-1 caption">\r\n\t\t\t\t\t\t\t\t\t\t<span class="pr-3">状态:</span>\r\n\t\t\t\t\t\t\t\t\t\t<v-chip small :class="`${item.status} white--text caption`">{{\r\n\t\t\t\t\t\t\t\t\t\t\titem.status != "complete" ? "进行中" : "已完成"\r\n\t\t\t\t\t\t\t\t\t\t}}</v-chip>\r\n\t\t\t\t\t\t\t\t\t</v-card-text>\r\n\t\t\t\t\t\t\t\t</v-col>\r\n\r\n\t\t\t\t\t\t\t\t<v-spacer></v-spacer>\r\n\r\n\t\t\t\t\t\t\t\t<div class="px-2">\r\n\t\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\t\t\t\tv-show="item.status != \'complete\'"\r\n\t\t\t\t\t\t\t\t\t\t@click.stop="\r\n\t\t\t\t\t\t\t\t\t\t\tcompleteDialog = true;\r\n\t\t\t\t\t\t\t\t\t\t\tselectItem = item;\r\n\t\t\t\t\t\t\t\t\t\t"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<v-icon>mdi-check</v-icon>\r\n\t\t\t\t\t\t\t\t\t\t<span class="d-none d-sm-flex">完成</span>\r\n\t\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t\t<v-btn dense text @click.stop="edit_item(item)">\r\n\t\t\t\t\t\t\t\t\t\t<v-icon>mdi-pencil</v-icon>\r\n\t\t\t\t\t\t\t\t\t\t<span class="d-none d-sm-flex">修改</span>\r\n\t\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t\t<v-btn dense text color="red" @click.stop="remove_item(item)">\r\n\t\t\t\t\t\t\t\t\t\t<v-icon>mdi-delete</v-icon>\r\n\t\t\t\t\t\t\t\t\t\t<span class="d-none d-sm-flex">删除</span>\r\n\t\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</v-row>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</v-expand-transition>\r\n\t\t\t\t</v-card>\r\n\t\t\t</v-hover>\r\n\t\t</v-container>\r\n\t\t\x3c!-- 对话框(提示完成) --\x3e\r\n\t\t<v-dialog v-model="completeDialog" max-width="290">\r\n\t\t\t<v-card>\r\n\t\t\t\t<v-card-title class="headline">确定完成?</v-card-title>\r\n\t\t\t\t<v-card-text>确定已经完成该事项,将该事项状态更改为已完成?</v-card-text>\r\n\t\t\t\t<v-card-actions>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn color="green darken-1" text @click="completeDialog = false">取消</v-btn>\r\n\t\t\t\t\t<v-btn color="green darken-1" text @click="complete_item()">确定</v-btn>\r\n\t\t\t\t</v-card-actions>\r\n\t\t\t</v-card>\r\n\t\t</v-dialog>\r\n\r\n\t\t\x3c!-- 项目对话框 --\x3e\r\n\t\t<ItemEditor @itemAdded="show_success(\'add\')" @itemModifyed="show_success(\'modify\')" ref="editor" />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport * as Utils from "../utils/utils";\r\nimport { mapGetters } from "vuex";\r\nimport ItemEditor from "../components/ItemEditor.vue";\r\nimport Snackbar from "../components/Snackbar.vue";\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tfilter: "",\r\n\t\t\tfilterTag: "",\r\n\t\t\texpand: [],\r\n\t\t\ttodoList: [],\r\n\t\t\tcompleteDialog: false,\r\n\t\t\tselectItem: {},\r\n\t\t\trecoveryItem: {}\r\n\t\t};\r\n\t},\r\n\tcomponents: {\r\n\t\tItemEditor,\r\n\t\tSnackbar\r\n\t},\r\n\tmethods: {\r\n\t\tinit_todo_list() {\r\n\t\t\tvar todoListData = Utils.getItem("todoList");\r\n\t\t\tif (todoListData) {\r\n\t\t\t\tthis.todoList = todoListData;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsort_by(filter) {\r\n\t\t\tthis.filter = filter;\r\n\t\t},\r\n\t\tsort_tag(tag) {\r\n\t\t\tthis.filterTag = tag;\r\n\t\t\tconsole.log(tag);\r\n\t\t},\r\n\t\texpand_handle(index) {\r\n\t\t\tvar si = this.expand.indexOf(index);\r\n\t\t\tif (si != -1) {\r\n\t\t\t\tthis.expand.splice(si, 1);\r\n\t\t\t} else {\r\n\t\t\t\tthis.expand.push(index);\r\n\t\t\t}\r\n\t\t},\r\n\t\tedit_item(item) {\r\n\t\t\tthis.$refs.editor.setEdit(JSON.parse(JSON.stringify(item)));\r\n\t\t},\r\n\t\tremove_item(item) {\r\n\t\t\tthis.recoveryItem = item;\r\n\t\t\tthis.show_delete(item);\r\n\t\t\tthis.$store.dispatch("removeTodo", item.id);\r\n\t\t},\r\n\t\tcomplete_item() {\r\n\t\t\tconst item = this.selectItem;\r\n\t\t\tthis.$store.dispatch("completedTodo", item.id);\r\n\t\t\tthis.completeDialog = false;\r\n\t\t},\r\n\t\trecovery_item() {\r\n\t\t\tthis.$store.dispatch("addTodo", this.recoveryItem);\r\n\t\t},\r\n\t\tshow_success(type) {\r\n\t\t\tlet msg = type === "add" ? "漂亮！你成功添加了一个新项目" : "OK!修改成功!";\r\n\t\t\tthis.$refs.snackbar.show(msg);\r\n\t\t},\r\n\t\tshow_delete(item) {\r\n\t\t\tlet msg = `你删除了项目:${item.title}`;\r\n\t\t\tthis.$refs.snackbar.showError(msg);\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(["getTodoList"]),\r\n\t\tsortedItemList() {\r\n\t\t\treturn this.todoList.filter((item, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t(this.filter == "" && this.filterTag == "") ||\r\n\t\t\t\t\t(this.filter != "" && item.status == this.filter) ||\r\n\t\t\t\t\t(this.filterTag != "" && item.tags.includes(this.filterTag))\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tgetTodoList: {\r\n\t\t\thandler: function (li) {\r\n\t\t\t\tlet vm = this;\r\n\t\t\t\tthis.todoList = li;\r\n\t\t\t\tthis.expand = [];\r\n\t\t\t},\r\n\t\t\tdeep: true\r\n\t\t},\r\n\t\tsortedItemList: function (val) {\r\n\t\t\tthis.expand = [];\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.init_todo_list();\r\n\t}\r\n};\r\n<\/script>\r\n\r\n<style>\r\n.item.complete {\r\n\tborder-left: 4px solid #3cd1c2;\r\n}\r\n.item.ongoing {\r\n\tborder-left: 4px solid orange;\r\n}\r\n.item.overdue {\r\n\tborder-left: 4px solid tomato;\r\n}\r\n.v-chip.complete {\r\n\tbackground: #3cd1c2 !important;\r\n}\r\n.v-chip.ongoing {\r\n\tbackground: #ffaa2c !important;\r\n}\r\n.v-chip.overdue {\r\n\tbackground: #f83e70 !important;\r\n}\r\n</style>\r\n'],sourceRoot:""}]),e.default=i},20:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"todo"},[n("Snackbar",{ref:"snackbar",on:{handleUndo:function(e){return t.recovery_item()}}}),t._v(" "),n("h1",{staticClass:"text-subtitle-1 grey--text"},[t._v("Todolist")]),t._v(" "),n("v-container",{staticClass:"my-2 pa-1 my-md-8 pa-md-6"},[n("v-row",{staticClass:"mb-4 mx-2"},[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,i=e.attrs;return[n("v-btn",t._g(t._b({attrs:{small:"",text:"",color:"grey"},on:{click:function(e){t.sort_by(""),t.sort_tag("")}}},"v-btn",i,!1),r),[n("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-folder")]),t._v("全部\n\t\t\t\t\t")],1)]}}])},[t._v(" "),n("span",[t._v("全部的待办事项")])]),t._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,i=e.attrs;return[n("v-btn",t._g(t._b({attrs:{small:"",text:"",color:"grey"},on:{click:function(e){t.sort_by("complete"),t.sort_tag("")}}},"v-btn",i,!1),r),[n("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-check-all")]),t._v("已完成\n\t\t\t\t\t")],1)]}}])},[t._v(" "),n("span",[t._v("已完成的待办事项")])]),t._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,i=e.attrs;return[n("v-btn",t._g(t._b({attrs:{small:"",text:"",color:"grey"},on:{click:function(e){t.sort_by("ongoing"),t.sort_tag("")}}},"v-btn",i,!1),r),[n("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-close")]),t._v("未完成\n\t\t\t\t\t")],1)]}}])},[t._v(" "),n("span",[t._v("未完成的待办事项")])])],1),t._v(" "),t._l(t.sortedItemList,(function(e,r){return n("v-hover",{key:e.id,scopedSlots:t._u([{key:"default",fn:function(i){var s=i.hover;return[n("v-card",{attrs:{ripple:!1,flat:""},on:{click:function(e){return t.expand_handle(r)}}},[n("v-row",{class:e.status+" pa-3 item",attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"4",sm:"3",md:"2"}},[n("div",{staticClass:"text-caption grey--text"},[t._v("事项名称")]),t._v(" "),n("div",[t._v(t._s(e.title))])]),t._v(" "),n("v-col",{staticClass:"d-none d-md-block",attrs:{md:"5"}},[n("div",{staticClass:"text-caption grey--text"},[t._v("详情")]),t._v(" "),n("div",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"300px"}},[t._v(t._s(e.content))])]),t._v(" "),n("v-col",{attrs:{cols:"3",sm:"3",md:"2"}},[n("div",{staticClass:"text-caption grey--text"},[t._v("截止日期")]),t._v(" "),n("div",[t._v(t._s(e.due))])]),t._v(" "),n("v-col",{attrs:{cols:"5",sm:"4",md:"2"}},[n("div",{staticClass:"text-caption grey--text"},[t._v("标签")]),t._v(" "),n("div",[e.tags&&0==e.tags.length?n("v-chip",{attrs:{"x-small":""},on:{click:function(e){return e.stopPropagation(),t.sort_tag("")}}},[n("span",[t._v("无")])]):t._l(e.tags,(function(e,r){return n("v-chip",{key:r,attrs:{"x-small":""},on:{click:function(n){return n.stopPropagation(),t.sort_tag(e)}}},[n("span",[t._v(t._s(e))])])}))],2)]),t._v(" "),n("v-spacer",{staticClass:"d-none d-sm-flex"}),t._v(" "),n("v-col",{attrs:{"align-self":"center"}},[s?n("v-btn",{staticClass:"mt-1 d-none d-sm-block",attrs:{icon:""}},[n("v-icon",[t._v(t._s(-1!=t.expand.indexOf(r)?"mdi-chevron-up":"mdi-chevron-down"))])],1):t._e()],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-expand-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:-1!=t.expand.indexOf(r),expression:"expand.indexOf(index) != -1"}]},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"7",md:"3","offset-md":"1",sm:"3","offset-sm":"1"}},[n("v-card-text",{staticClass:"pt-2 pb-1 caption"},[n("span",{staticClass:"pr-3"},[t._v("状态:")]),t._v(" "),n("v-chip",{class:e.status+" white--text caption",attrs:{small:""}},[t._v(t._s("complete"!=e.status?"进行中":"已完成"))])],1)],1),t._v(" "),n("v-spacer"),t._v(" "),n("div",{staticClass:"px-2"},[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:"complete"!=e.status,expression:"item.status != 'complete'"}],attrs:{dense:"",text:""},on:{click:function(n){n.stopPropagation(),t.completeDialog=!0,t.selectItem=e}}},[n("v-icon",[t._v("mdi-check")]),t._v(" "),n("span",{staticClass:"d-none d-sm-flex"},[t._v("完成")])],1),t._v(" "),n("v-btn",{attrs:{dense:"",text:""},on:{click:function(n){return n.stopPropagation(),t.edit_item(e)}}},[n("v-icon",[t._v("mdi-pencil")]),t._v(" "),n("span",{staticClass:"d-none d-sm-flex"},[t._v("修改")])],1),t._v(" "),n("v-btn",{attrs:{dense:"",text:"",color:"red"},on:{click:function(n){return n.stopPropagation(),t.remove_item(e)}}},[n("v-icon",[t._v("mdi-delete")]),t._v(" "),n("span",{staticClass:"d-none d-sm-flex"},[t._v("删除")])],1)],1)],1)],1)])],1)]}}],null,!0)})}))],2),t._v(" "),n("v-dialog",{attrs:{"max-width":"290"},model:{value:t.completeDialog,callback:function(e){t.completeDialog=e},expression:"completeDialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v("确定完成?")]),t._v(" "),n("v-card-text",[t._v("确定已经完成该事项,将该事项状态更改为已完成?")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.completeDialog=!1}}},[t._v("取消")]),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.complete_item()}}},[t._v("确定")])],1)],1)],1),t._v(" "),n("ItemEditor",{ref:"editor",on:{itemAdded:function(e){return t.show_success("add")},itemModifyed:function(e){return t.show_success("modify")}}})],1)};r._withStripped=!0;var i=n(0),s=n(4),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"580px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({attrs:{color:"blue darken-2",dark:"",bottom:"",right:"",fixed:"",fab:"",ripple:""},on:{click:t.setAdd}},r),[n("v-icon",[t._v("mdi-plus")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n("v-card",[n("v-card-title",[n("h2",[t._v(t._s(t.editing?"修改":"添加事项"))])]),t._v(" "),n("v-card-text",[n("v-form",{ref:"form",staticClass:"px-3"},[n("v-text-field",{attrs:{label:"事项标题","prepend-icon":"mdi-folder",rules:t.inputRules},model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}}),t._v(" "),n("v-textarea",{attrs:{"no-resize":"","hide-details":"auto",label:"详情","prepend-icon":"mdi-pencil",rules:t.inputRules},model:{value:t.item.content,callback:function(e){t.$set(t.item,"content",e)},expression:"item.content"}}),t._v(" "),n("v-menu",{ref:"menu",attrs:{"max-width":"290","close-on-content-click":!1,"return-value":t.item.due,transition:"scale-transition","offset-y":""},on:{"update:returnValue":function(e){return t.$set(t.item,"due",e)},"update:return-value":function(e){return t.$set(t.item,"due",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,i=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{label:"截止日期","prepend-icon":"mdi-calendar-range"},model:{value:t.item.due,callback:function(e){t.$set(t.item,"due",e)},expression:"item.due"}},"v-text-field",i,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.item.due,callback:function(e){t.$set(t.item,"due",e)},expression:"item.due"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("取消")]),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.item.due)}}},[t._v("确定")])],1)],1),t._v(" "),n("v-combobox",{attrs:{items:t.tagItems,"search-input":t.search,"hide-selected":"",hint:"最多3个标签",label:"标签",multiple:"","prepend-icon":"mdi-bookmark","persistent-hint":"","small-chips":""},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},scopedSlots:t._u([{key:"selection",fn:function(e){var r=e.attrs,i=e.item,s=e.select,o=e.selected;return[n("v-chip",t._b({attrs:{"input-value":o,close:""},on:{click:s,"click:close":function(e){return t.remove(i)}}},"v-chip",r,!1),[t._v(t._s(i))])]}},{key:"no-data",fn:function(){return[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[t._v('\n\t\t\t\t\t\t\t\t\t没有"\n\t\t\t\t\t\t\t\t\t'),n("strong",[t._v(t._s(t.search))]),t._v('"的标签. 按 '),n("kbd",[t._v("enter")]),t._v(" 来创建一个\n\t\t\t\t\t\t\t\t")])],1)],1)]},proxy:!0}]),model:{value:t.item.tags,callback:function(e){t.$set(t.item,"tags",e)},expression:"item.tags"}}),t._v(" "),n("v-col",[n("v-btn",{staticClass:"mt-3",attrs:{color:"primary",loading:t.loading},on:{click:t.submit}},[t._v(t._s(t.editing?"修改":"添加事项"))])],1)],1)],1)],1)],1)};o._withStripped=!0;var a={data:()=>({item:{title:"",content:"",due:"",status:"",tags:[]},dialog:!1,tagItems:["计划","工作","娱乐","生活"],inputRules:[t=>!!t||"必填",t=>t&&t.length>=2||"至少两个字符"],menu:!1,loading:!1,editing:!1,search:null}),methods:{setAdd(){this.item={title:"",content:"",due:"",status:"",tags:[]},this.editing=!1},submit(){this.$refs.form.validate()?(this.loading=!0,this.editing?this.modifyItem():this.addItem()):alert("请检查输入")},modifyItem(){const t={title:this.item.title,content:this.item.content,due:this.item.due,status:this.item.status,tags:this.item.tags,id:this.item.id};this.$store.dispatch("modifyTodo",t).then(t=>{this.dialog=!1,this.loading=!1,this.editing=!1,this.$emit("itemModifyed"),this.$refs.form.reset()})},addItem(){const t={title:this.item.title,content:this.item.content,due:this.item.due,status:this.item.status||"ongoing",tags:this.item.tags};this.$store.dispatch("addTodo",t).then(t=>{this.dialog=!1,this.loading=!1,this.$emit("itemAdded"),this.$refs.form.reset()})},remove(t){this.item.tags.splice(this.item.tags.indexOf(t),1),this.item.tags=[...this.item.tags]},setEdit(t){this.item=t,this.editing=!0,this.dialog=!0}},watch:{"item.tags"(t){t&&t.length>3&&this.$nextTick(()=>this.item.tags.pop())}}},c=n(2),l=Object(c.a)(a,o,[],!1,null,null,null);l.options.__file="src/components/ItemEditor.vue";var d={data:()=>({filter:"",filterTag:"",expand:[],todoList:[],completeDialog:!1,selectItem:{},recoveryItem:{}}),components:{ItemEditor:l.exports,Snackbar:n(14).a},methods:{init_todo_list(){var t=i.a("todoList");t&&(this.todoList=t)},sort_by(t){this.filter=t},sort_tag(t){this.filterTag=t,console.log(t)},expand_handle(t){var e=this.expand.indexOf(t);-1!=e?this.expand.splice(e,1):this.expand.push(t)},edit_item(t){this.$refs.editor.setEdit(JSON.parse(JSON.stringify(t)))},remove_item(t){this.recoveryItem=t,this.show_delete(t),this.$store.dispatch("removeTodo",t.id)},complete_item(){const t=this.selectItem;this.$store.dispatch("completedTodo",t.id),this.completeDialog=!1},recovery_item(){this.$store.dispatch("addTodo",this.recoveryItem)},show_success(t){let e="add"===t?"漂亮！你成功添加了一个新项目":"OK!修改成功!";this.$refs.snackbar.show(e)},show_delete(t){let e="你删除了项目:"+t.title;this.$refs.snackbar.showError(e)}},computed:{...Object(s.b)(["getTodoList"]),sortedItemList(){return this.todoList.filter((t,e)=>""==this.filter&&""==this.filterTag||""!=this.filter&&t.status==this.filter||""!=this.filterTag&&t.tags.includes(this.filterTag))}},watch:{getTodoList:{handler:function(t){this.todoList=t,this.expand=[]},deep:!0},sortedItemList:function(t){this.expand=[]}},mounted(){this.init_todo_list()}},v=(n(16),Object(c.a)(d,r,[],!1,null,null,null));v.options.__file="src/views/Todo.vue";e.default=v.exports}}]);
//# sourceMappingURL=1.bundle.c21b583f.js.map