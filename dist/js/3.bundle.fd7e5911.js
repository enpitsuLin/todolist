(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{14:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-snackbar",{attrs:{timeout:t.undo?4e3:2500,top:"",color:t.undo?"error":"success"},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[t.undo?i("v-btn",t._b({attrs:{dark:"",icon:""},on:{click:t.handleUndo}},"v-btn",s,!1),[i("v-icon",[t._v("mdi-undo-variant")])],1):t._e(),t._v(" "),i("v-btn",t._b({attrs:{dark:"",icon:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",s,!1),[i("v-icon",[t._v("mdi-close-circle")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[i("span",[t._v(t._s(t.msg))])])};s._withStripped=!0;var r={name:"Snackbar",data:()=>({snackbar:!1,undo:!1,msg:""}),methods:{handleUndo(){this.snackbar=!1,this.$emit("handleUndo")},show(t){this.undo=!1,this.msg=t,this.snackbar=!0},showError(t){this.undo=!0,this.msg=t,this.snackbar=!0}}},o=i(2),n=Object(o.a)(r,s,[],!1,null,null,null);n.options.__file="src/components/Snackbar.vue";e.a=n.exports},19:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"projects"},[i("Snackbar",{ref:"snackbar",on:{handleUndo:function(e){return t.recovery_item()}}}),t._v(" "),i("h1",{staticClass:"text-subtitle-1 grey--text"},[t._v("Projects")]),t._v(" "),i("v-container",{staticClass:"my-2 pa-1 my-md-8 pa-md-6"},[i("v-expansion-panels",{attrs:{flat:""}},t._l(t.projects,(function(e){return i("ProjectItem",{key:e.id,attrs:{project:e},on:{ProjectRemoved:function(i){return t.hanlder_delete(e)},ProjectEdit:function(i){return t.edit_project(e)}}})})),1)],1),t._v(" "),i("ProjectEditor",{ref:"editor",on:{itemAdded:function(e){return t.show_success("add")},itemModifyed:function(e){return t.show_success("modify")}}})],1)};s._withStripped=!0;var r=i(0),o=i(4),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-expansion-panel",[i("v-expansion-panel-header",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.open;return[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"6",sm:"5",md:"4"}},[t._v(t._s(t.project.title))]),t._v(" "),i("v-col",{staticClass:"text--secondary",attrs:{cols:"6",sm:"7",md:"8"}},[i("v-fade-transition",{attrs:{"leave-absolute":""}},[i("v-row",{staticStyle:{width:"100%"},attrs:{"no-gutters":""}},s?[i("v-col",{attrs:{cols:"3"}},[i("span",[t._v("进度:")])]),t._v(" "),i("v-col",{staticClass:"mr-1",attrs:{cols:"8"}},[i("v-progress-linear",{attrs:{color:t.process>=100?"green":"light-blue",height:"10",value:t.process,striped:""}})],1)]:[i("v-col",{attrs:{cols:"12"}},[t._v("截止于 "+t._s(t.project.due))])],1)],1)],1)],1)]}}])}),t._v(" "),i("v-expansion-panel-content",[i("v-divider"),t._v(" "),i("v-timeline",{attrs:{dense:""}},[t._l(t.project.items,(function(e,s){return i("v-timeline-item",{key:s,attrs:{small:""}},[i("v-card",{staticClass:"elevation-2"},[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",[i("v-checkbox",{staticClass:"my-2 pt-0 pl-4",attrs:{"hide-details":"",dense:"",color:e.done?"grey":"primary"},on:{click:function(i){e.done?t.step++:t.step--}},scopedSlots:t._u([{key:"label",fn:function(){return[i("div",{class:e.done?"grey--text":"primary--text",domProps:{textContent:t._s(e.title)}})]},proxy:!0}],null,!0),model:{value:e.done,callback:function(i){t.$set(e,"done",i)},expression:"item.done"}})],1)],1)],1)],1)})),t._v(" "),0==t.project.items.length?i("v-timeline-item",{attrs:{small:""}},[i("v-card",{staticClass:"elevation-2"},[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",[i("div",{staticClass:"primary--text my-2 pt-0 pl-4"},[t._v("没有可用步骤,按下面的按钮来添加一个")])])],1)],1)],1):t._e()],2),t._v(" "),i("v-divider"),t._v(" "),i("v-row",[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{text:""},on:{click:function(e){return t.edit_project()}}},[i("v-icon",[t._v("mdi-pencil")]),t._v(" "),i("span",[t._v("编辑")])],1),t._v(" "),i("ProjectItemEdit",{attrs:{id:t.project.id}}),t._v(" "),i("v-btn",{attrs:{text:"",color:"red"},on:{click:function(e){return t.remove_project()}}},[i("v-icon",[t._v("mdi-delete")]),t._v(" "),i("span",[t._v("删除")])],1)],1)],1)],1)};n._withStripped=!0;var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"580px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-btn",t._g({attrs:{text:""}},s),[i("v-icon",[t._v("mdi-plus")]),t._v(" "),i("span",[t._v("增加步骤")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),i("v-card",[i("v-card-title",[i("h2",[t._v("添加步骤")])]),t._v(" "),i("v-card-text",[i("v-form",{ref:"form",staticClass:"px-3"},[i("v-text-field",{attrs:{label:"步骤标题","prepend-icon":"mdi-folder",rules:t.inputRules},model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}}),t._v(" "),i("v-col",[i("v-btn",{staticClass:"mt-3",attrs:{color:"primary",loading:t.loading},on:{click:t.submit}},[t._v("添加步骤")])],1)],1)],1)],1)],1)};a._withStripped=!0;var c={props:{id:String},data:()=>({item:{title:"",done:!1},dialog:!1,inputRules:[t=>!!t||"必填",t=>t&&t.length>=2||"至少两个字符"],loading:!1}),methods:{submit(){this.$refs.form.validate()?(this.loading=!0,this.addItem()):alert("请检查输入")},addItem(){const t={title:this.item.title,done:this.item.done},e=this.id;this.$store.dispatch("addProjectItem",{id:e,item:t}).then(t=>{this.dialog=!1,this.loading=!1,this.$emit("itemAdded"),this.$refs.form.reset()})}}},l=i(2),d=Object(l.a)(c,a,[],!1,null,null,null);d.options.__file="src/components/ProjectItemEditor.vue";var u=d.exports,m={props:{project:{type:Object,default:function(){return{id:null,title:"",due:"",items:[]}}}},data:()=>({step:0}),components:{ProjectItemEdit:u},computed:{process(){return this.step/this.project.items.length*100}},methods:{remove_project(){this.$emit("ProjectRemoved",this.project)},edit_project(){this.$emit("ProjectEdit",this.project)}}},v=Object(l.a)(m,n,[],!1,null,null,null);v.options.__file="src/components/ProjectItem.vue";var p=v.exports,h=i(14),_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"580px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-btn",t._g({attrs:{color:"blue darken-2",dark:"",bottom:"",right:"",fixed:"",fab:"",ripple:""},on:{click:t.setAdd}},s),[i("v-icon",[t._v("mdi-plus")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),i("v-card",[i("v-card-title",[i("h2",[t._v(t._s(t.editing?"修改":"添加项目"))])]),t._v(" "),i("v-card-text",[i("v-form",{ref:"form",staticClass:"px-3"},[i("v-text-field",{attrs:{label:"事项标题","prepend-icon":"mdi-folder",rules:t.inputRules},model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}}),t._v(" "),i("v-menu",{ref:"menu",attrs:{"max-width":"290","close-on-content-click":!1,"return-value":t.item.due,transition:"scale-transition","offset-y":""},on:{"update:returnValue":function(e){return t.$set(t.item,"due",e)},"update:return-value":function(e){return t.$set(t.item,"due",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,r=e.attrs;return[i("v-text-field",t._g(t._b({attrs:{label:"截止日期","prepend-icon":"mdi-calendar-range"},model:{value:t.item.due,callback:function(e){t.$set(t.item,"due",e)},expression:"item.due"}},"v-text-field",r,!1),s))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),i("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.item.due,callback:function(e){t.$set(t.item,"due",e)},expression:"item.due"}},[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("取消")]),t._v(" "),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.item.due)}}},[t._v("确定")])],1)],1),t._v(" "),i("v-col",[i("v-btn",{staticClass:"mt-3",attrs:{color:"primary",loading:t.loading},on:{click:t.submit}},[t._v(t._s(t.editing?"修改":"添加事项"))])],1)],1)],1)],1)],1)};_._withStripped=!0;var f={data:()=>({item:{title:"",due:"",status:"",items:[]},dialog:!1,inputRules:[t=>!!t||"必填",t=>t&&t.length>=2||"至少两个字符"],menu:!1,loading:!1,editing:!1}),methods:{setAdd(){this.item={title:"",due:"",status:"",items:[]},this.editing=!1},submit(){this.$refs.form.validate()?(this.loading=!0,this.editing?this.modifyItem():this.addItem()):alert("请检查输入")},modifyItem(){const t={id:this.item.id,title:this.item.title,due:this.item.due,items:this.item.items};this.$store.dispatch("modifyProject",t).then(t=>{this.dialog=!1,this.loading=!1,this.editing=!1,this.$emit("itemModifyed"),this.$refs.form.reset()})},addItem(){const t={title:this.item.title,due:this.item.due,items:this.item.items};this.$store.dispatch("addProject",t).then(t=>{this.dialog=!1,this.loading=!1,this.$emit("itemAdded"),this.$refs.form.reset()})},remove(t){this.item.tags.splice(this.item.tags.indexOf(t),1),this.item.tags=[...this.item.tags]},setEdit(t){this.item=t,this.editing=!0,this.dialog=!0}},watch:{"item.tags"(t){t&&t.length>3&&this.$nextTick(()=>this.item.tags.pop())}}},g=Object(l.a)(f,_,[],!1,null,null,null);g.options.__file="src/components/ProjectEditor.vue";var b=g.exports,j={data:()=>({projects:[],recoveryProject:{}}),components:{ProjectItem:p,Snackbar:h.a,ProjectEditor:b},methods:{init_projects(){var t=r.a("projects");t&&(this.projects=t)},edit_project(t){this.$refs.editor.setEdit(JSON.parse(JSON.stringify(t)))},add_project_item(t,e){this.$store.dispatch("addProjectItem",t,e)},hanlder_delete(t){this.$store.dispatch("removeProject",t.id),this.recoveryProject=t,this.show_delete(t)},recovery_item(){this.$store.dispatch("addProject",this.recoveryProject)},show_success(t){let e="add"===t?"漂亮！你成功添加了一个新项目":"OK!修改成功!";this.$refs.snackbar.show(e)},show_delete(t){let e="你删除了项目:"+t.title;this.$refs.snackbar.showError(e)}},computed:{...Object(o.b)(["getProjects"])},watch:{getProjects:{handler:function(t){this.projects=t},deep:!0}},mounted(){this.init_projects()}},k=Object(l.a)(j,s,[],!1,null,null,null);k.options.__file="src/views/Projects.vue";e.default=k.exports}}]);
//# sourceMappingURL=3.bundle.fd7e5911.js.map